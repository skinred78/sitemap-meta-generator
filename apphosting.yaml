# Firebase App Hosting configuration
# https://firebase.google.com/docs/app-hosting/configure

# Runtime configuration
runConfig:
  # Node.js version
  runtime: nodejs20

  # Memory allocation (256Mi, 512Mi, 1Gi, 2Gi, 4Gi, 8Gi)
  memory: 1Gi

  # CPU allocation (0.5, 1, 2, 4, 8)
  cpu: 1

  # Maximum concurrent requests per instance
  concurrency: 80

  # Autoscaling
  minInstances: 0  # Scale to zero when idle (saves costs)
  maxInstances: 10  # Limit concurrent instances

# Environment variables and secrets
env:
  - variable: NODE_ENV
    value: production
    availability:
      - RUNTIME
  - variable: GOOGLE_API_KEY
    secret: GOOGLE_API_KEY
    availability:
      - RUNTIME

# Build configuration
buildConfig:
  # Build command
  buildCommand: npm run build

  # Install command (use npm ci for consistent CI builds)
  installCommand: npm ci

# Health check (optional)
# healthCheck:
#   path: /api/health
#   interval: 60s
#   timeout: 10s
#   unhealthyThreshold: 3
